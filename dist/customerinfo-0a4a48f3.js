"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[707],{44098:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f,mapToShippingProps:()=>h});var r=a(31635),n=a(30455),i=a(60833),l=a(46487),d=a(49655),o=a(24001),s=a(54454),c=a(45293),u=a(11889),m=a(28407),p=function(e){function t(t){var a=e.call(this,t)||this;return a.handlesubmit=function(e){return(0,r.__awaiter)(a,void 0,void 0,(function(){var t,a,n,i,l,d,o,s,c,u,m,p,h,f,g,_,y,b,v,I;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e.preventDefault(),t=this.props,a=t.po_number,n=t.budgeting,i=t.program_id,l=t.bottler,d=t.assigned_program_id,o=t.assigned_field_display,s=t.infoUpdated,c=t.team_name,u=t.cart,m=t.handleCustomerInfoUpdate,11!=this.state.customerGrpId?[3,16]:""==c.label?[3,15]:(this.setState({isLoading:!0}),document.getElementById("dealerScript")?(h=document.getElementById("dealerScript"),f=h.attributes.store_api.nodeValue,g=(null==u?void 0:u.id)||"",f&&""!=g?(_=1,y=1,b=1,v=1,I=1,p=void 0,0==(null==s?void 0:s.team_name.valid)&&c?[4,this.createMetaFieldsGraphQL(g,"team_name",c,f)]:[3,2]):[3,15]):[3,15]);case 1:return p=r.sent(),[3,4];case 2:return[4,this.updateMetaFieldsGraphQL(g,null==s?void 0:s.team_name.entityID,"team_name",c,f)];case 3:p=r.sent(),r.label=4;case 4:return 0==(null==s?void 0:s.assigned_program_id.entityID)?[3,6]:[4,this.deleteMetaFieldsGraphQL(g,null==s?void 0:s.assigned_program_id.entityID,f)];case 5:_=r.sent(),r.label=6;case 6:return 0==(null==s?void 0:s.program_id.entityID)?[3,8]:[4,this.deleteMetaFieldsGraphQL(g,null==s?void 0:s.program_id.entityID,f)];case 7:y=r.sent(),r.label=8;case 8:return 0==(null==s?void 0:s.bottler.entityID)?[3,10]:[4,this.deleteMetaFieldsGraphQL(g,null==s?void 0:s.bottler.entityID,f)];case 9:b=r.sent(),r.label=10;case 10:return 0==(null==s?void 0:s.assigned_program_id.entityID)?[3,12]:[4,this.deleteMetaFieldsGraphQL(g,null==s?void 0:s.assigned_program_id.entityID,f)];case 11:I=r.sent(),r.label=12;case 12:return 0==(null==s?void 0:s.po_number.entityID)?[3,14]:[4,this.deleteMetaFieldsGraphQL(g,null==s?void 0:s.po_number.entityID,f)];case 13:v=r.sent(),r.label=14;case 14:0!=_&&0!=y&&0!=b&&0!=v&&0!=I&&0!=p?(this.setState({customerInfoError:!1}),m(g,f)):(this.setState({customerInfoError:!0}),this.setState({isLoading:!1})),r.label=15;case 15:return[3,40];case 16:return""==a||""==n.label||""==i.label||""==l.label||0!=o&&(1!=o||""==d)?[3,40]:(this.setState({isLoading:!0}),document.getElementById("dealerScript")?(h=document.getElementById("dealerScript"),f=h.attributes.store_api.nodeValue,g=(null==u?void 0:u.id)||"",f&&""!=g?(_=void 0,y=void 0,b=void 0,v=void 0,I=void 0,0==(null==s?void 0:s.budgeting.valid)&&n?[4,this.createMetaFieldsGraphQL(g,"budgeting",n,f)]:[3,18]):[3,40]):[3,40]);case 17:return _=r.sent(),[3,20];case 18:return[4,this.updateMetaFieldsGraphQL(g,null==s?void 0:s.budgeting.entityID,"budgeting",n,f)];case 19:_=r.sent(),r.label=20;case 20:return 0==(null==s?void 0:s.program_id.valid)&&i?[4,this.createMetaFieldsGraphQL(g,"program_id",i,f)]:[3,22];case 21:return y=r.sent(),[3,24];case 22:return[4,this.updateMetaFieldsGraphQL(g,null==s?void 0:s.program_id.entityID,"program_id",i,f)];case 23:y=r.sent(),r.label=24;case 24:return 0==(null==s?void 0:s.bottler.valid)&&l?[4,this.createMetaFieldsGraphQL(g,"bottler",l,f)]:[3,26];case 25:return b=r.sent(),[3,28];case 26:return[4,this.updateMetaFieldsGraphQL(g,null==s?void 0:s.bottler.entityID,"bottler",l,f)];case 27:b=r.sent(),r.label=28;case 28:return 0==(null==s?void 0:s.po_number.valid)&&a?[4,this.createMetaFieldsGraphQL(g,"po_number",a,f)]:[3,30];case 29:return v=r.sent(),[3,32];case 30:return[4,this.updateMetaFieldsGraphQL(g,null==s?void 0:s.po_number.entityID,"po_number",a,f)];case 31:v=r.sent(),r.label=32;case 32:return 1!=o?[3,37]:0==(null==s?void 0:s.assigned_program_id.entityID)&&d?[4,this.createMetaFieldsGraphQL(g,"assigned_program_id",d,f)]:[3,34];case 33:return I=r.sent(),[3,36];case 34:return[4,this.updateMetaFieldsGraphQL(g,null==s?void 0:s.assigned_program_id.entityID,"assigned_program_id",d,f)];case 35:I=r.sent(),r.label=36;case 36:return[3,39];case 37:return 0==(null==s?void 0:s.assigned_program_id.entityID)?[3,39]:[4,this.deleteMetaFieldsGraphQL(g,null==s?void 0:s.assigned_program_id.entityID,f)];case 38:I=r.sent(),r.label=39;case 39:0!=_&&0!=y&&0!=b&&0!=v&&0!=I?(this.setState({customerInfoError:!1}),m(g,f)):(this.setState({customerInfoError:!0}),this.setState({isLoading:!1})),r.label=40;case 40:return[2]}}))}))},a.deleteMetaFieldsGraphQL=function(e,t,n){return(0,r.__awaiter)(a,void 0,void 0,(function(){var a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return a='\n            mutation MyMutation {\n                cart {\n                    deleteCartMetafield(input: {cartEntityId: "'.concat(e,'", metafieldEntityId: ').concat(t,"}) {\n                        deletedMetafieldEntityId\n                    }\n                }\n            }\n        "),[4,fetch("/graphql",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({query:a})}).then((function(e){return e.json()})).then((function(e){if(e&&e.data&&e.data.cart&&e.data.cart.deleteCartMetafield)return 1}))];case 1:return r.sent(),[2]}}))}))},a.createMetaFieldsGraphQL=function(e,t,n,i){return(0,r.__awaiter)(a,void 0,void 0,(function(){var a,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return a="po_number"==t||"assigned_program_id"==t?n:n.label,l='\n            mutation createCartMetafield {\n                cart {\n                    createCartMetafield(\n                    input: {cartEntityId: "'.concat(e,'", data: {key: "').concat(t,'", value: "').concat(a,'"}}\n                    ) {\n                        metafield {\n                            id\n                            entityId\n                            key\n                            value\n                        }\n                        errors {\n                            ... on Error {\n                            message\n                            }\n                        }\n                    }\n                }\n            }\n        '),[4,fetch("/graphql",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({query:l})}).then((function(e){return e.json()})).then((function(e){return e&&e.data&&e.data.cart&&e.data.cart.createCartMetafield.metafield&&e.data.cart.createCartMetafield.metafield.entityId?e.data.cart.createCartMetafield.metafield.entityId:0}))];case 1:return r.sent(),[2]}}))}))},a.updateMetaFieldsGraphQL=function(e,t,n,i,l){return(0,r.__awaiter)(a,void 0,void 0,(function(){var a,d;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return a="po_number"==n||"assigned_program_id"==n?i:i.label,d='\n            mutation updateCartMetafield {\n                cart {\n                    updateCartMetafield(\n                    input: {cartEntityId: "'.concat(e,'", data: {key: "').concat(n,'", value: "').concat(a,'"}, metafieldEntityId: ').concat(t,"}\n                    ) {\n                        metafield {\n                            id\n                            entityId\n                            key\n                            value\n                        }\n                        errors {\n                            ... on Error {\n                            message\n                            }\n                        }\n                    }\n                }\n            }\n        "),[4,fetch("/graphql",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)},body:JSON.stringify({query:d})}).then((function(e){return e.json()})).then((function(e){return e&&e.data&&e.data.cart&&e.data.cart.updateCartMetafield.metafield&&e.data.cart.updateCartMetafield.metafield.entityId?e.data.cart.updateCartMetafield.metafield.entityId:0}))];case 1:return r.sent(),[2]}}))}))},a.state={customerGrpId:0,isLoading:!1,customerInfoError:!1},a}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this.props.customer;e&&e.customerGroup&&e.customerGroup.id&&this.setState({customerGrpId:e.customerGroup.id})},t.prototype.render=function(){var e=this.props,t=e.infoData,a=e.handleInfoChange,r=e.po_number,c=e.budgeting,p=e.program_id,h=e.bottler,f=e.assigned_program_id,g=e.assigned_field_display,_=e.team_name,y=this.state,b=y.customerGrpId,v=y.isLoading,I=y.customerInfoError;return n.createElement("form",{className:"checkout-form",id:"checkout-customerInfo-returning",onSubmit:this.handlesubmit},n.createElement(i.A,null,n.createElement("div",{className:"customerInfo-form"},I&&n.createElement(u.A,{type:u.v.Error},n.createElement(d.A,{id:"customerInfo.error_message"})),t.map((function(e,t){return n.createElement(n.Fragment,null,e&&"dropdown"==e.type?n.createElement(n.Fragment,null,e.group_ids.map((function(r,i){return n.createElement(n.Fragment,null,r==b&&n.createElement("div",{key:t,className:"dynamic-form-field"},n.createElement("div",{className:"form-field",key:i},n.createElement(m.A,{htmlFor:e.metafieldKey},e.label),n.createElement(o.Ay,{className:"custom-select-box",classNamePrefix:"react-select",id:e.metafieldKey,"aria-label":e.label,"aria-placeholder":e.placeholder,name:e.label,options:e.options,placeholder:e.placeholder,value:"budgeting"==e.metafieldKey?""!=c.label?c:e.placeholder:"program_id"==e.metafieldKey?""!=p.label?p:e.placeholder:"bottler"==e.metafieldKey?""!=h.label?h:e.placeholder:""!=_.label?_:e.placeholder,onChange:function(t){return a(e.metafieldKey,t)}}))))}))):n.createElement(n.Fragment,null,e.group_ids.map((function(i){return n.createElement(n.Fragment,null,i==b&&("assigned_program_id"!=e.metafieldKey||"assigned_program_id"==e.metafieldKey&&1==g)&&n.createElement("div",{key:t,className:"dynamic-form-field"},n.createElement("div",{className:"form-field",key:t+"1"},n.createElement(m.A,{htmlFor:e.metafieldKey},e.label),n.createElement(s.A,{id:e.metafieldKey,name:e.label,onChange:function(t){return a(e.metafieldKey,t.target.value)},placeholder:e.placeholder?e.placeholder:e.label,testId:"".concat(e.metafieldKey,"-").concat("text"),type:"text",value:"po_number"==e.metafieldKey?r:f,additionalClassName:"po_number"==e.metafieldKey&&c&&"100% BODYARMOR"==c.value?"input_disabled":""}))))}))))})))),n.createElement("div",{className:"form-actions"},n.createElement(l.Ay,{disabled:11==b?""==_.label:""==r||""==c.label||""==p.label||""==h.label||1==g&&""==f,id:"checkout-customerInfo-create",isLoading:v,testId:"customer-customerInfo-create",type:"submit",variant:l.Ak.Primary},n.createElement(d.A,{id:"customerInfo.continue"}))))},t}(n.Component);function h(e){var t=e.checkoutState.data,a=t.getCustomer,r=t.getCart,n=t.getConfig,i=a(),l=r(),d=n();return i&&d&&l?{customer:i,cart:l}:null}const f=(0,c.A)(h)(p)}}]);
//# sourceMappingURL=customerinfo-0a4a48f3.js.map